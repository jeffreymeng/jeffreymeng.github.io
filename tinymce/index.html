<!DOCTYPE html>
<html>

<head>
    <script src='/tinymce/production/js/tinymce/tinymce.min.js'></script>
    <script src="https://cdn.firebase.com/js/client/2.4.0/firebase.js"></script>
    <script src="http://code.jquery.com/jquery-1.12.0.min.js"></script>
    
    <script>
        /* global tinymce */
        /* global Firebase */
        var getUserInfo = function() {
            var name, email, id, docname, doctitle, out;
            out = {
                user: {
                    name: name,
                    email: email,
                    child: {
                        id: id
                    }
                },
                doc: {
                    safe: {
                        name: docname,
                        title: doctitle
                    }
                }
            }
        };
        var fb = new Firebase("https://jeffreymeng.firebaseio.com/jdoc/");

        function save(content) {
            console.log($("#myTextarea").val())
            // fb.child(getUserInfo().user.child.id).child(getUserInfo.doc.safe.name).set(content);
        }
        tinymce.init({
            selector: '#myTextarea',
            theme: 'modern',
            width: "100%",
            height: "100%",
            browser_spellcheck: true,
            plugins: [
                'advlist autolink autosave link image lists charmap colorpicker print preview hr anchor pagebreak spellchecker',
                'searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking',
                'save table contextmenu directionality template paste textcolor'
            ],
            autosave_interval: "2s",
            setup: function(editor) {
                editor.addButton('SAVEbutton', {
                    text: 'Save',
                    icon: '<i class="fa fa-floppy-o"></i>',
                    onclick: function(){save($("#myTextarea").val());},
                });

            },
            toolbar: 'insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | SAVEbutton print preview media fullpage | forecolor backcolor'
        });
    </script>
</head>

<body>
    <div id="editor" class="editor">
        <h1>Welcome to Jeffrey's Cloud Text Editor</h1>
        <textarea id="myTextarea"></textarea>
    </div>
</body>

</html>