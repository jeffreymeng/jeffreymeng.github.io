<!DOCTYPE html>
<html>

<head>

    <link rel="stylesheet" type="text/css" href="https://assets.jeffkmeng.com/bootstrap/3.3.6/css/bootstrap.min.css">

    <title>Jeffrey Code</title>
</head>

<body>
    <div class="container">
        <div class="col-lg-12">
            <h1>Jeffrey's Code Archive</h1>
            <p class="text-muted">A simple template for all projects.</p>
            <div class="container col-lg-12" id="repo-box">
                <input class="fuzzy-search form-control" placeholder="Search" />


                <hr>



                <ul class="pagination-top pagination"></ul>
                <div class="list list-group" id="repos">

                </div>
                <ul class="pagination-bottom pagination"></ul>
            </div>



        </div>
    </div>
    <script src="https://assets.jeffkmeng.com/jquery/2.2.4/js/jquery.min.js"></script>
    <script src="https://assets.jeffkmeng.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="https://assets.jeffkmeng.com/list/1.2.0/js/list.min.js"></script>
    <script src="https://assets.jeffkmeng.com/list/1.2.0/js/list.pagination.min.js"></script>
    <script src="https://assets.jeffkmeng.com/list/1.2.0/js/list.fuzzysearch.min.js"></script>
    <script>
        /* global $ List ListFuzzySearch ListPagination atob*/



var fuzzyOptions = {
                searchClass: "fuzzy-search",
                location: 0,
                distance: 100,
                threshold: 0.4,
                multiSearch: true
            };
            var paginationTopOptions = {
                name: "pagination-top",
                paginationClass: "pagination-top",
                outerWindow: 2
            };
            var paginationBottomOptions = {
                name: "pagination-bottom",
                paginationClass: "pagination-bottom",
                innerWindow: 3,
                left: 2,
                right: 4
            };
            var options = {
                valueNames: 'name',
                page: 7,
                plugins: [
                    ListFuzzySearch(fuzzyOptions),
                    ListPagination(paginationTopOptions),
                    ListPagination(paginationBottomOptions)
                ]
            };
        $.getJSON("https://api.github.com/users/jeffreymeng/repos", null, function(data) {
            //console.log(data);
            for (var i = 0; i < data.length; i++) {
                $("#repos").append("<p class='list-group-item'>" + data[i].name + " (<a href='https://github.com/jeffreymeng/" + data[i].name + "' class='name'>Github</a><span id='" + data[i].name + "-otherinfo'></span>)</p>");
            }
            for (var i = 0; i < data.length; i++) {
                
                $.getJSON("https://api.github.com/repos/jeffreymeng/" + data[i].name + "/contents/CNAME", null, function(data){
                    if (data.content !== null) {
                        $("#otherinfo").html(" | <a href='" + atob(data.content).replace(" ", "").replace("\n", "") + "'>Website</a>");
                    } else {
                        $.getJSON("https://api.github.com/repos/jeffreymeng/" + data[i].name + "/branches/gh-pages", null, function(data){
                            if (data.name !== null) {
                                $("#" + data[i].name + "-otherinfo").html(" | <a href='https://code.jeffkmeng.com/" + data[i].name + "'>Website</a>");
                            }
                        });
                        
                    }
                });
            }
            
            new List('repo-box', options);
        });
    </script>
</body>

</html>